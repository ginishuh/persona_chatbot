# UI/UX ì¬ì„¤ê³„ ê³„íšì„œ

**ì‘ì„±ì¼**: 2025-11-12
**ë²„ì „**: 1.2
**ìƒíƒœ**: ì ìš© ì™„ë£Œ(History API ë¼ìš°íŒ… + stories ì œê±° + Export HTTP)

---

## ğŸ“‹ ëª©ì°¨

1. [í˜„ì¬ UI ë¬¸ì œì ](#í˜„ì¬-ui-ë¬¸ì œì )
2. [ëª©í‘œ ë° ë””ìì¸ ì›ì¹™](#ëª©í‘œ-ë°-ë””ìì¸-ì›ì¹™)
3. [ë¼ìš°íŒ… ì „ëµ](#ë¼ìš°íŒ…-ì „ëµ)
4. [ìƒˆë¡œìš´ UI êµ¬ì¡°](#ìƒˆë¡œìš´-ui-êµ¬ì¡°)
5. [í™”ë©´ë³„ ìƒì„¸ ì„¤ê³„](#í™”ë©´ë³„-ìƒì„¸-ì„¤ê³„)
6. [ì„¤ì • êµ¬ì¡° ë³€ê²½](#ì„¤ì •-êµ¬ì¡°-ë³€ê²½)
7. [Export/Import ì „ì†¡ ë°©ì‹](#exportimport-ì „ì†¡-ë°©ì‹)
8. [êµ¬í˜„ ê³„íš](#êµ¬í˜„-ê³„íš)
9. [ì˜ˆìƒ ì‘ì—…ëŸ‰](#ì˜ˆìƒ-ì‘ì—…ëŸ‰)

---

## í˜„ì¬ UI ë¬¸ì œì 

### 1. ì •ë³´ ê³¼ë¶€í•˜
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ì„¤ì •] [ìºë¦­í„°] [ì„¸ê³„ê´€] ...                             â”‚  â† ë©”ë‰´ë°”
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â”‚                       â”‚                      â”‚
â”‚ ì±„íŒ…ë°©   â”‚    ì±„íŒ… ë‚´ìš©          â”‚   ì„œì‚¬/íˆìŠ¤í† ë¦¬      â”‚
â”‚ ëª©ë¡     â”‚                       â”‚                      â”‚
â”‚          â”‚                       â”‚                      â”‚
â”‚ Room 1   â”‚    [ì§„í–‰ì]: ...      â”‚   # ì„œì‚¬ ê¸°ë¡        â”‚
â”‚ Room 2   â”‚    [ìºë¦­í„°]: ...      â”‚   ...                â”‚
â”‚ Room 3   â”‚                       â”‚                      â”‚
â”‚          â”‚    [ì…ë ¥ì°½____]       â”‚                      â”‚
â”‚          â”‚                       â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ë¬¸ì œì **:
- í•œ í™”ë©´ì— ë„ˆë¬´ ë§ì€ ì •ë³´
- ì±„íŒ…ì— ì§‘ì¤‘í•˜ê¸° ì–´ë ¤ì›€
- ëª¨ë°”ì¼ì—ì„œ ì‚¬ìš© ë¶ˆê°€ëŠ¥
- ì„¤ì •ì´ ì–´ë”” ìˆëŠ”ì§€ í—·ê°ˆë¦¼

### 2. ì„¤ì • ìœ„ì¹˜ í˜¼ë€
- "ì „ì—­ ì„¤ì •"ì— ì‹¤ì œë¡œëŠ” **ì±„íŒ…ë°©ë³„ ì„¤ì •** (world, characters, narrator)ì´ ìˆìŒ
- ì±„íŒ…ë°©ë§ˆë‹¤ ë‹¤ë¥¸ ì„¸ê³„ê´€ì„ ì“°ë ¤ë©´ ë§¤ë²ˆ ì „ì—­ ì„¤ì •ì„ ë°”ê¿”ì•¼ í•¨
- ì±„íŒ…ë°© ì „í™˜ ì‹œ ì„¤ì •ì´ ìë™ìœ¼ë¡œ ì•ˆ ë°”ë€œ

### 3. ë„¤ë¹„ê²Œì´ì…˜ ë¶€ì¬
- ì±„íŒ…ë°© ê°„ ì „í™˜ì´ ì§ê´€ì ì´ì§€ ì•ŠìŒ
- "ë’¤ë¡œê°€ê¸°" ê°œë… ì—†ìŒ
- ëª¨ë°”ì¼ ì¹œí™”ì ì´ì§€ ì•ŠìŒ

---

## ëª©í‘œ ë° ë””ìì¸ ì›ì¹™

### ëª©í‘œ

1. **ë‹¨ìˆœí™”**: í•œ ë²ˆì— í•˜ë‚˜ì˜ ì‘ì—…ì— ì§‘ì¤‘
2. **ì§ê´€ì„±**: ChatGPT/Claudeì²˜ëŸ¼ ìµìˆ™í•œ íŒ¨í„´
3. **ëª¨ë°”ì¼ ì¹œí™”**: ë°˜ì‘í˜• ë””ìì¸
4. **ì±„íŒ…ë°© ë…ë¦½ì„±**: ê° ì±„íŒ…ë°©ì´ ë…ë¦½ì ì¸ ì„¤ì •ì„ ê°€ì§

### ë””ìì¸ ì›ì¹™

- **Progressive Disclosure**: í•„ìš”í•œ ì •ë³´ë§Œ ë‹¨ê³„ì ìœ¼ë¡œ í‘œì‹œ
- **Context-aware**: í˜„ì¬ í™”ë©´/ì±„íŒ…ë°©ì— ë§ëŠ” ê¸°ëŠ¥ë§Œ í‘œì‹œ
- **Touch-friendly**: ë²„íŠ¼/í„°ì¹˜ ì˜ì—­ ì¶©ë¶„íˆ í¬ê²Œ
- **Familiar patterns**: ì‚¬ìš©ìê°€ ì´ë¯¸ ì•„ëŠ” íŒ¨í„´ í™œìš©

---

## ë¼ìš°íŒ… ì „ëµ

### ì„ íƒ: History API ë¼ìš°íŒ… (pushState/popstate)

- URL ì„¤ê³„:
  - `/` â†’ ì±„íŒ…ë°© ëª©ë¡(Home)
  - `/rooms/:roomId` â†’ ì±„íŒ…ë°© í™”ë©´
  - `/rooms/:roomId/settings` â†’ ì±„íŒ…ë°© ì„¤ì • í™”ë©´
  - `/rooms/:roomId/history` â†’ íˆìŠ¤í† ë¦¬(ì½ê¸° ì „ìš©) í™”ë©´
  - `/backup` â†’ Export/Import í™”ë©´
- ì„œë²„(SPA fallback) ìš”êµ¬ ì‚¬í•­: ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ë¡œ ìš”ì²­ì— ëŒ€í•´ í•­ìƒ `index.html` ë°˜í™˜.
  - `CustomHandler.do_GET`ì—ì„œ `/app-config.json`Â·ì •ì  ìì›Â·`/api/*`ë¥¼ ì œì™¸í•˜ê³  ë‚˜ë¨¸ì§€ëŠ” `index.html`ë¡œ í¬ì›Œë”©.
- ì¥ì : ê¹”ë”í•œ URL/ë¶ë§ˆí¬/ê³µìœ  ìš©ì´, ì¥ê¸°ì ìœ¼ë¡œ SSR/í•˜ì´ë¸Œë¦¬ë“œ ì „í™˜ì— ìœ ë¦¬.

ë¸Œë¼ìš°ì € ë’¤ë¡œê°€ê¸°/ì•ìœ¼ë¡œê°€ê¸°ëŠ” History APIë¡œ ì²˜ë¦¬í•˜ë©°, ì´ˆê¸° ì§„ì… ì‹œ `location.pathname`ì„ íŒŒì‹±í•´ í•´ë‹¹ í™”ë©´ì„ ì§ì ‘ ë Œë”ë§í•©ë‹ˆë‹¤.

### ë¹„êµ: History API vs Hash ë¼ìš°íŒ…

- History API
  - ì¥ì : ê¹”ë”í•œ URL(`/rooms/123`), ë¶ë§ˆí¬/ê³µìœ  ì¹œí™”, ì„œë²„ì¸¡ ë Œë”ë§(SSR) ì „í™˜ ìš©ì´, ì ‘ê·¼ì„± ë„êµ¬ê°€ ì‹¤ì œ ê²½ë¡œë¥¼ ì¸ì‹
  - ë‹¨ì : ì„œë²„ì—ì„œ SPA fallback ì„¤ì • í•„ìš”(ì •ì  ì„œë²„/í”„ë¡ì‹œ ê·œì¹™ í¬í•¨)
- Hash ë¼ìš°íŒ…(`#` ê¸°ë°˜)
  - ì¥ì : ì„œë²„ ì„¤ì • ë¶ˆí•„ìš”(ëª¨ë“  ìš”ì²­ì€ `index.html`ë¡œ), êµ¬í˜„ ë‹¨ìˆœ
  - ë‹¨ì : URLì´ ì§€ì €ë¶„í•˜ê³  SEO/í”„ë¦¬ë Œë”/ì„œë²„ì‚¬ì´ë“œ ì „í™˜ì´ ì–´ë µê³ , ì¼ë¶€ ë³´ì•ˆ/í”„ë¡ì‹œ ì •ì±…ê³¼ ì¶©ëŒ ì†Œì§€

ë³¸ í”„ë¡œì íŠ¸ëŠ” ì¥ê¸°ì ìœ¼ë¡œ SSR/í•˜ì´ë¸Œë¦¬ë“œ ì „í™˜ ê°€ëŠ¥ì„±ê³¼ ë¶ë§ˆí¬/ê³µìœ  í’ˆì§ˆì„ ì¤‘ì‹œí•˜ì—¬ History APIë¥¼ ì±„íƒí–ˆìŠµë‹ˆë‹¤.

---

## ìƒˆë¡œìš´ UI êµ¬ì¡°

### í™”ë©´ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì±„íŒ…ë°© ëª©ë¡  â”‚  â† í™ˆ í™”ë©´
â”‚              â”‚
â”‚ â€¢ Room 1     â”‚
â”‚ â€¢ Room 2     â”‚
â”‚ â€¢ Room 3     â”‚
â”‚              â”‚
â”‚ [+ ìƒˆ ì±„íŒ…]  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ í´ë¦­
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì±„íŒ…ë°© ë‚´ë¶€ â”‚  â† ê°œë³„ ì±„íŒ…ë°© í™”ë©´
â”‚              â”‚
â”‚ â† Room 1  â‹®  â”‚  â† ë’¤ë¡œê°€ê¸° + ë©”ë‰´
â”‚              â”‚
â”‚ [ì§„í–‰ì]:... â”‚
â”‚ [ìºë¦­í„°]:... â”‚
â”‚              â”‚
â”‚ [ì…ë ¥ì°½___]  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ ë©”ë‰´ (â‹®) í´ë¦­
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì±„íŒ…ë°© ë©”ë‰´ â”‚
â”‚              â”‚
â”‚ â€¢ ì„¤ì •       â”‚  â† ì´ ë°©ì˜ world, characters, narrator
â”‚ â€¢ Export     â”‚
â”‚ â€¢ íˆìŠ¤í† ë¦¬   â”‚
â”‚ â€¢ ì±„íŒ…ë°© ì‚­ì œâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ê³„ì¸µ êµ¬ì¡°

```
App
â”œâ”€ ë¡œê·¸ì¸ í™”ë©´ (LOGIN_REQUIREDì¼ ë•Œ)
â”œâ”€ ì±„íŒ…ë°© ëª©ë¡ í™”ë©´ (Home)
â”‚  â”œâ”€ í—¤ë”: [â˜° ë©”ë‰´] [íƒ€ì´í‹€] [+ ìƒˆ ì±„íŒ…]
â”‚  â”œâ”€ ì±„íŒ…ë°© ë¦¬ìŠ¤íŠ¸
â”‚  â”‚  â”œâ”€ ì±„íŒ…ë°© ì¹´ë“œ (ì œëª©, ë§ˆì§€ë§‰ ë©”ì‹œì§€, ì‹œê°„)
â”‚  â”‚  â””â”€ ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ (ê¾¹ ëˆ„ë¥´ê¸°)
â”‚  â””â”€ ì „ì—­ ë©”ë‰´
â”‚     â”œâ”€ ì „ì²´ Export
â”‚     â”œâ”€ Import
â”‚     â””â”€ ì•± ì„¤ì • (í…Œë§ˆ, ì–¸ì–´ ë“± - ì‹¤ì œ ì „ì—­ ì„¤ì •)
â”‚
â””â”€ ì±„íŒ…ë°© í™”ë©´ (Room)
   â”œâ”€ í—¤ë”: [â† ë’¤ë¡œ] [ì±„íŒ…ë°© ì œëª©] [â‹® ë©”ë‰´]
   â”œâ”€ ë©”ì‹œì§€ ì˜ì—­
   â”‚  â””â”€ ë©”ì‹œì§€ ë²„ë¸” (ìºë¦­í„°ë³„ ìƒ‰ìƒ)
   â”œâ”€ ì…ë ¥ ì˜ì—­
   â”‚  â”œâ”€ í…ìŠ¤íŠ¸ ì…ë ¥
   â”‚  â””â”€ ì „ì†¡ ë²„íŠ¼
   â””â”€ ì±„íŒ…ë°© ë©”ë‰´ (â‹®)
      â”œâ”€ ì±„íŒ…ë°© ì„¤ì • (world, characters, narrator)
      â”œâ”€ íˆìŠ¤í† ë¦¬ ë³´ê¸°
      â”œâ”€ Export ì´ ì±„íŒ…ë°©
      â”œâ”€ ì±„íŒ… ê¸°ë¡ ì‚­ì œ
      â””â”€ ì±„íŒ…ë°© ì‚­ì œ
```

---

## í™”ë©´ë³„ ìƒì„¸ ì„¤ê³„

### 1. ì±„íŒ…ë°© ëª©ë¡ í™”ë©´ (Home)

#### ì™€ì´ì–´í”„ë ˆì„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜°  Persona Chat              [+ ìƒˆ ì±„íŒ…]â”‚  â† í—¤ë”
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ° íŒíƒ€ì§€ ëª¨í—˜                       â”‚ â”‚  â† ì±„íŒ…ë°© ì¹´ë“œ
â”‚ â”‚ [ì§„í–‰ì]: ìš©ì‚¬ê°€ ë§ˆì™•ì„±ì—...         â”‚ â”‚
â”‚ â”‚ ì˜¤ëŠ˜ ì˜¤í›„ 3:24                       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ’• ë¡œë§¨ìŠ¤ ìŠ¤í† ë¦¬                     â”‚ â”‚
â”‚ â”‚ [ê¹€í˜œìˆ˜]: ì•ˆë…•í•˜ì„¸ìš”~                â”‚ â”‚
â”‚ â”‚ ì–´ì œ ì˜¤í›„ 11:15                      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸš€ SF ìš°ì£¼ íƒí—˜                      â”‚ â”‚
â”‚ â”‚ [ì„ ì¥]: ì›Œí”„ ë“œë¼ì´ë¸Œ ì¤€ë¹„!          â”‚ â”‚
â”‚ â”‚ 11ì›” 10ì¼                            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚         (ìŠ¤í¬ë¡¤ ê°€ëŠ¥)                   â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ê¸°ëŠ¥

**í—¤ë”**:
- â˜° ì „ì—­ ë©”ë‰´
  - ì „ì²´ Export
  - Import
  - ì•± ì„¤ì •
  - ë¡œê·¸ì•„ì›ƒ
- íƒ€ì´í‹€: "Persona Chat"
- [+ ìƒˆ ì±„íŒ…]: ìƒˆ ì±„íŒ…ë°© ìƒì„±

**ì±„íŒ…ë°© ì¹´ë“œ**:
- ì•„ì´ì½˜ (ì´ëª¨ì§€ ë˜ëŠ” ìë™ ìƒì„±)
- ì œëª©
- ë§ˆì§€ë§‰ ë©”ì‹œì§€ ë¯¸ë¦¬ë³´ê¸°
- íƒ€ì„ìŠ¤íƒ¬í”„
- **íƒ­**: ì±„íŒ…ë°© ì§„ì…
- **ê¾¹ ëˆ„ë¥´ê¸°** (ëª¨ë°”ì¼) / **ìš°í´ë¦­** (PC): ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´
  - ì´ë¦„ ë³€ê²½
  - Export
  - ì‚­ì œ

**ë¹ˆ ìƒíƒœ**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚            ğŸ’¬                           â”‚
â”‚                                         â”‚
â”‚       ì•„ì§ ì±„íŒ…ë°©ì´ ì—†ìŠµë‹ˆë‹¤            â”‚
â”‚                                         â”‚
â”‚    [+ ì²« ë²ˆì§¸ ì±„íŒ…ë°© ë§Œë“¤ê¸°]            â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2. ì±„íŒ…ë°© í™”ë©´ (Room)

#### ì™€ì´ì–´í”„ë ˆì„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† íŒíƒ€ì§€ ëª¨í—˜                        â‹®  â”‚  â† í—¤ë”
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚ â”‚ ì•ˆë…•?                  â”‚ ì˜¤í›„ 3:20   â”‚  â† ì‚¬ìš©ì ë©”ì‹œì§€ (ìš°ì¸¡)
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                         â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   ì˜¤í›„ 3:21  â”‚ [ì§„í–‰ì]: ì°¨ê°‘ê³  ì¶•  â”‚   â”‚  â† AI ë©”ì‹œì§€ (ì¢Œì¸¡)
â”‚              â”‚ ì¶•í•œ ì§€í•˜ê°ì˜¥...     â”‚   â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   ì˜¤í›„ 3:21  â”‚ [ì„±ë…€]: ìœ¼ìŒ... ì—¬ê¸° â”‚   â”‚
â”‚              â”‚ ê°€ ì–´ë””ì§€?           â”‚   â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚ â”‚ ëˆ„êµ¬ëƒ                 â”‚ ì˜¤í›„ 3:22   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                         â”‚
â”‚         (ìŠ¤í¬ë¡¤ ê°€ëŠ¥)                   â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”...___________] [â†‘] â”‚  â† ì…ë ¥ ì˜ì—­
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ê¸°ëŠ¥

**í—¤ë”**:
- [â†]: ë’¤ë¡œê°€ê¸° â†’ ì±„íŒ…ë°© ëª©ë¡ìœ¼ë¡œ
- ì±„íŒ…ë°© ì œëª©: íƒ­í•˜ë©´ ì œëª© ìˆ˜ì •
- [â‹®]: ì±„íŒ…ë°© ë©”ë‰´
  - âš™ï¸ ì±„íŒ…ë°© ì„¤ì •
  - ğŸ“Š íˆìŠ¤í† ë¦¬ ë³´ê¸°
  - ğŸ’¾ Export ì´ ì±„íŒ…ë°©
  - ğŸ—‘ï¸ ì±„íŒ… ê¸°ë¡ ì‚­ì œ
  - ğŸš« ì±„íŒ…ë°© ì‚­ì œ

**ë©”ì‹œì§€ ì˜ì—­**:
- ì‚¬ìš©ì ë©”ì‹œì§€: ìš°ì¸¡ ì •ë ¬, íŒŒë€ìƒ‰
- AI ë©”ì‹œì§€: ì¢Œì¸¡ ì •ë ¬, ìºë¦­í„°ë³„ ìƒ‰ìƒ
- íƒ€ì„ìŠ¤íƒ¬í”„
- ë¬´í•œ ìŠ¤í¬ë¡¤ (ìœ„ë¡œ ìŠ¤í¬ë¡¤ â†’ ì´ì „ ë©”ì‹œì§€ ë¡œë“œ)

**ì…ë ¥ ì˜ì—­**:
- Textarea (ì—¬ëŸ¬ ì¤„ ì…ë ¥ ê°€ëŠ¥)
- Enter/Shift+Enter ì²˜ë¦¬ (ëª¨ë°”ì¼/PC ë¶„ë¦¬)
- [â†‘] ì „ì†¡ ë²„íŠ¼
- ì…ë ¥ ì¤‘ì¼ ë•Œ ìë™ìœ¼ë¡œ ë†’ì´ ì¡°ì ˆ

---

### 3. ì±„íŒ…ë°© ì„¤ì • í™”ë©´

#### ì§„ì…: ì±„íŒ…ë°© í™”ë©´ â†’ [â‹®] â†’ "ì±„íŒ…ë°© ì„¤ì •"

#### ì™€ì´ì–´í”„ë ˆì„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† ì±„íŒ…ë°© ì„¤ì •                            â”‚  â† í—¤ë”
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚ ğŸŒ ì„¸ê³„ê´€                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ íŒíƒ€ì§€ ì„¸ê³„ê´€...                    â”‚ â”‚
â”‚ â”‚ (Textarea)                          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ [ë¶ˆëŸ¬ì˜¤ê¸°] [ì €ì¥]                       â”‚
â”‚                                         â”‚
â”‚ ğŸ“ ìƒí™©                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ìš©ì‚¬ê°€ ë§ˆì™•ì„±ì—...                  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ ğŸ‘¤ ë‚´ ìºë¦­í„°                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ìš©ì‚¬ íˆë¡œ                           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ ğŸ‘¥ ë“±ì¥ ìºë¦­í„°                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â€¢ [ì„±ë…€] ìˆœìˆ˜í•œ ì„±ë…€          [Ã—]   â”‚ â”‚
â”‚ â”‚ â€¢ [ì—˜í”„] ë„ë„í•œ ì—˜í”„          [Ã—]   â”‚ â”‚
â”‚ â”‚ â€¢ [ê²©íˆ¬ê°€] ê±°ì¹œ ê²©íˆ¬ê°€        [Ã—]   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ [+ ìºë¦­í„° ì¶”ê°€]                         â”‚
â”‚                                         â”‚
â”‚ ğŸ­ ì§„í–‰ì ì„¤ì •                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â˜‘ AI ì§„í–‰ì í™œì„±í™”                  â”‚ â”‚
â”‚ â”‚ ëª¨ë“œ: [Active â–¼]                    â”‚ â”‚
â”‚ â”‚ ë¬˜ì‚¬: [Direct â–¼]                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ ğŸ” ì„±ì¸ ì„¤ì •                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ë ˆë²¨: [Enhanced â–¼]                  â”‚ â”‚
â”‚ â”‚ ì¶œë ¥ ìˆ˜ì¤€: [More â–¼]                 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ ğŸ¤– AI ì œê³µì                            â”‚
â”‚ [Claude â–¼]                              â”‚
â”‚                                         â”‚
â”‚         [ì·¨ì†Œ]  [ì €ì¥]                  â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### íŠ¹ì§•

- **ì±„íŒ…ë°©ë³„ ë…ë¦½ ì„¤ì •**: ê° ì±„íŒ…ë°©ì´ ìì‹ ë§Œì˜ world, characters, narrator ì„¤ì • ë³´ìœ 
- **í”„ë¦¬ì…‹ ì§€ì›**: "ë¶ˆëŸ¬ì˜¤ê¸°" ë²„íŠ¼ìœ¼ë¡œ persona_data/presets/ ì—ì„œ ë¡œë“œ
- **ì¦‰ì‹œ ì ìš©**: "ì €ì¥" ëˆ„ë¥´ë©´ í•´ë‹¹ ì±„íŒ…ë°© ì„¤ì • ì—…ë°ì´íŠ¸

---

### 4. íˆìŠ¤í† ë¦¬ í™”ë©´ (Room History)

#### ì§„ì…: ì±„íŒ…ë°© í™”ë©´ â†’ [â‹®] â†’ "íˆìŠ¤í† ë¦¬ ë³´ê¸°" ë˜ëŠ” ì§ì ‘ `/rooms/:roomId/history`

#### ì™€ì´ì–´í”„ë ˆì„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† íˆìŠ¤í† ë¦¬                               â”‚  â† í—¤ë”
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚ # íˆìŠ¤í† ë¦¬(ì½ê¸° ì „ìš©)                    â”‚
â”‚                                         â”‚
â”‚ ## 1. ì‚¬ìš©ì                            â”‚
â”‚ ì•ˆë…•?                                   â”‚
â”‚                                         â”‚
â”‚ ## 2. AI ì‘ë‹µ                           â”‚
â”‚ [ì§„í–‰ì]: ì°¨ê°‘ê³  ì¶•ì¶•í•œ ì§€í•˜ê°ì˜¥...     â”‚
â”‚ [ì„±ë…€]: ìœ¼ìŒ... ì—¬ê¸°ê°€ ì–´ë””ì§€?          â”‚
â”‚                                         â”‚
â”‚ ## 3. ì‚¬ìš©ì                            â”‚
â”‚ ëˆ„êµ¬ëƒ                                  â”‚
â”‚                                         â”‚
â”‚ (ë§ˆí¬ë‹¤ìš´ ë Œë”ë§)                       â”‚
â”‚                                         â”‚
â”‚   [ë‹¤ìš´ë¡œë“œ(MD)]   [ë‹¤ìš´ë¡œë“œ(JSON)]     â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### íŠ¹ì§•

- ì½ê¸° ì „ìš©(í¸ì§‘/ì…ë ¥ ì—†ìŒ)
- ë§ˆí¬ë‹¤ìš´ ë Œë”ë§(ì„œë²„ëŠ” DB `messages`ì—ì„œ ì¦‰ì‹œ ë³€í™˜)
- ë‹¤ìš´ë¡œë“œ: ì„œë²„ HTTP ì—”ë“œí¬ì¸íŠ¸(`/api/export`)ì—ì„œ MD/JSON ì œê³µ
- ë¬´í•œ ìŠ¤í¬ë¡¤(ìœ„ë¡œ ì´ë™ ì‹œ ê³¼ê±° ë©”ì‹œì§€ ì¶”ê°€ ë¡œë“œ)

---

## ì„¤ì • êµ¬ì¡° ë³€ê²½

### ê¸°ì¡´ êµ¬ì¡° (ë¬¸ì œ)

```
ì „ì—­ ì„¤ì • (Global Settings)
â”œâ”€ World
â”œâ”€ Situation
â”œâ”€ User Character
â”œâ”€ Characters
â”œâ”€ Narrator
â””â”€ Adult Level
```

**ë¬¸ì œ**: ì±„íŒ…ë°©ë§ˆë‹¤ ë‹¤ë¥¸ ì„¤ì •ì„ ì“°ë ¤ë©´ ë§¤ë²ˆ ì „ì—­ ì„¤ì •ì„ ë³€ê²½í•´ì•¼ í•¨

---

### ìƒˆë¡œìš´ êµ¬ì¡° (í•´ê²°)

```
ì•± ì„¤ì • (App Settings) - ì‹¤ì œ ì „ì—­
â”œâ”€ í…Œë§ˆ (ë¼ì´íŠ¸/ë‹¤í¬)
â”œâ”€ ì–¸ì–´
â”œâ”€ ì•Œë¦¼
â””â”€ ê¸°ë³¸ AI ì œê³µì

ì±„íŒ…ë°© ì„¤ì • (Room Settings) - ì±„íŒ…ë°©ë³„
â”œâ”€ World
â”œâ”€ Situation
â”œâ”€ User Character
â”œâ”€ Characters
â”œâ”€ Narrator
â”œâ”€ Adult Level
â””â”€ AI Provider (ì´ ë°©ë§Œ)
```

---

### ì„¤ì • ì €ì¥ ìœ„ì¹˜

#### DB ìŠ¤í‚¤ë§ˆ ì—…ë°ì´íŠ¸ (ìš”ì•½)

```sql
-- rooms í…Œì´ë¸”ì˜ context ì»¬ëŸ¼ì— JSONìœ¼ë¡œ ì €ì¥
CREATE TABLE rooms (
    room_id TEXT PRIMARY KEY,
    session_key TEXT NOT NULL,
    title TEXT NOT NULL,
    context TEXT,  -- â† ì—¬ê¸°ì— ëª¨ë“  ì±„íŒ…ë°© ì„¤ì • ì €ì¥
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### context JSON ì˜ˆì‹œ

```json
{
  "world": "íŒíƒ€ì§€ ì„¸ê³„ê´€...",
  "situation": "ìš©ì‚¬ê°€ ë§ˆì™•ì„±ì— ì¹¨ì…...",
  "user_character": "ìš©ì‚¬ íˆë¡œ, 17ì„¸...",
  "narrator_enabled": true,
  "narrator_mode": "active",
  "narrator_description": "ìƒí™©ì„ ìƒìƒí•˜ê²Œ ë¬˜ì‚¬í•˜ëŠ” ì§„í–‰ì",
  "narrator_drive": "direct",
  "adult_level": "enhanced",
  "output_level": "more",
  "narrative_separation": true,
  "choice_policy": "off",
  "ai_provider": "claude",
  "characters": [
    {
      "name": "ì„±ë…€",
      "gender": "ì—¬ì„±",
      "age": "20ëŒ€",
      "description": "ìˆœìˆ˜í•œ ì„±ë…€..."
    },
    {
      "name": "ì—˜í”„",
      "gender": "ì—¬ì„±",
      "age": "ì™¸í˜• 20ëŒ€",
      "description": "ë„ë„í•œ ì—˜í”„..."
    }
  ]
}
```

---

## Export/Import ì „ì†¡ ë°©ì‹

### ê²°ì •
- ê¸°ë³¸: HTTP ë‹¤ìš´ë¡œë“œ ì—”ë“œí¬ì¸íŠ¸(`/api/export`)ì—ì„œ ëŒ€ê·œëª¨ Export ì œê³µ(ì˜µì…˜: ZIP ì••ì¶•).
- ë³´ì¡°: ì†Œìš©ëŸ‰(ë‹¨ì¼ ë°©/ìµœê·¼ ní„´ ë“±) ExportëŠ” WebSocket ë‹¨ê±´ ì „ì†¡ í´ë°± í—ˆìš©.
- Import: ì´ˆê¸°ì—ëŠ” WebSocket `import_data` ìœ ì§€(ê°„ë‹¨/ë¹ ë¦„). ëŒ€ìš©ëŸ‰ ì—…ë¡œë“œê°€ í•„ìš”í•´ì§€ë©´ HTTP `POST /api/import` ì¶”ê°€.

### ì¥ë‹¨ì  ìš”ì•½
- HTTP ë‹¤ìš´ë¡œë“œ: ë¸Œë¼ìš°ì € ì¹œí™”Â·ëŒ€ìš©ëŸ‰ ì•ˆì •Â·ë§í¬ ê³µìœ /ì¤‘ë‹¨ì¬ê°œ ìš©ì´(ì„œë²„ êµ¬í˜„ ì‹œ) / êµ¬í˜„ì— ì„œë²„ ë¼ìš°íŠ¸+ì¸ì¦ í•„ìš”.
- WebSocket ë‹¨ê±´: êµ¬í˜„ ë‹¨ìˆœ / ëŒ€ìš©ëŸ‰ì—ì„œ í•œê³„(í”„ë¡ì‹œ/ë©”ëª¨ë¦¬/ë³µêµ¬ ì·¨ì•½).
- WebSocket ì²­í¬: ëŒ€ìš©ëŸ‰ OK / êµ¬í˜„ ë³µì¡(ì²­í¬/ì¬ì¡°ë¦½/ì˜¤ë²„í—¤ë“œ).

---

## êµ¬í˜„ ê³„íš

### Phase 0: ë¼ìš°íŒ…/ì„œë²„ ì¤€ë¹„ (0.5ì¼)

- History API ë¼ìš°í„° ìŠ¤ì¼ˆë ˆí†¤(`navigate`, `onpopstate`) ì¶”ê°€
- ì„œë²„ SPA fallback êµ¬í˜„(`/api/*`Â·ì •ì  ì œì™¸ ë‚˜ë¨¸ì§€ â†’ `index.html`)

### Phase 1: í™”ë©´ ë¶„ë¦¬ (2-3ì¼)

#### 1.1 ë¼ìš°íŒ… ì‹œìŠ¤í…œ ì¶”ê°€(History API)
```javascript
// app.js
const routes = {
  '/': renderRoomListScreen,
  '/rooms/:id': renderRoomDetailScreen,
  '/rooms/:id/settings': renderRoomSettingsScreen,
  '/rooms/:id/history': renderRoomHistoryScreen,
  '/backup': renderBackupScreen,
};

function navigate(path) {
  window.history.pushState({ path }, '', path);
  renderCurrentScreenFrom(location.pathname);
}

window.addEventListener('popstate', () => {
  renderCurrentScreenFrom(location.pathname);
});
```

#### 1.2 í™”ë©´ ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬
- [ ] `renderRoomListScreen()` - ì±„íŒ…ë°© ëª©ë¡
- [ ] `renderRoomDetailScreen()` - ì±„íŒ…ë°© ë‚´ë¶€
- [ ] `renderRoomSettingsScreen()` - ì±„íŒ…ë°© ì„¤ì •
- [ ] `renderRoomHistoryScreen()` - íˆìŠ¤í† ë¦¬ ë³´ê¸°

#### 1.3 ë’¤ë¡œê°€ê¸° êµ¬í˜„
ë¸Œë¼ìš°ì € `popstate`ì—ì„œ `location.pathname`ì„ íŒŒì‹±í•´ í•´ë‹¹ í™”ë©´ì„ ë Œë”ë§í•©ë‹ˆë‹¤(ìœ„ ì½”ë“œ ì°¸ì¡°).

---

### Phase 2: ì„¤ì • êµ¬ì¡° ë³€ê²½ (1-2ì¼)

#### 2.1 Context Handler ì—…ë°ì´íŠ¸
```python
# server/handlers/context_handler.py

class ContextHandler:
    def __init__(self):
        # ì±„íŒ…ë°©ë³„ ì„¤ì • (ê¸°ì¡´)
        self.world = ""
        self.situation = ""
        self.user_character = ""
        self.characters = []
        self.narrator_enabled = True
        # ...

    def load_from_room_context(self, context_json):
        """DBì˜ rooms.contextì—ì„œ ë¡œë“œ"""
        config = json.loads(context_json)
        self.world = config.get('world', '')
        self.situation = config.get('situation', '')
        # ...

    def to_room_context(self):
        """DB ì €ì¥ìš© JSONìœ¼ë¡œ ë³€í™˜"""
        return json.dumps({
            'world': self.world,
            'situation': self.situation,
            # ...
        })
```

#### 2.2 WebSocket API ì—…ë°ì´íŠ¸
```javascript
// ê¸°ì¡´: set_context (ì „ì—­)
// ë³€ê²½: set_room_context (ì±„íŒ…ë°©ë³„)

{
  "action": "set_room_context",
  "data": {
    "room_id": "fantasy_001",
    "context": {
      "world": "...",
      "situation": "...",
      // ...
    }
  }
}
```

#### 2.3 ì±„íŒ…ë°© ì „í™˜ ì‹œ ì„¤ì • ìë™ ë¡œë“œ
```python
# websocket_server.py

def _get_room(session, room_id):
    """ì±„íŒ…ë°© ê°€ì ¸ì˜¤ê¸° + ì„¤ì • ë¡œë“œ"""
    rid = room_id or "default"
    rooms = session.setdefault("rooms", {})
    room = rooms.get(rid)

    if not room:
        # DBì—ì„œ ì±„íŒ…ë°© ì„¤ì • ë¡œë“œ
        room_data = await db_handler.get_room(session_key, rid)

        # ContextHandler ìƒì„± ë° ì„¤ì • ë¡œë“œ
        context_handler = ContextHandler()
        if room_data and room_data['context']:
            context_handler.load_from_room_context(room_data['context'])

        room = {
            "history": HistoryHandler(max_turns=30),
            "context": context_handler,
            "provider_sessions": {},
        }
        rooms[rid] = room

    return rid, room
```

---

### Phase 3: Export/Import ë° ë°˜ì‘í˜• (1-2ì¼)
- HTTP `/api/export` ì—°ë™(ëŒ€ê·œëª¨), ì†Œê·œëª¨ WS í´ë°±
- Import UI(WS) ë° ì˜¤ë¥˜/ì§„í–‰ë¥  í‘œì‹œ
- ë°˜ì‘í˜•/ëª¨ë°”ì¼ ìµœì í™”

#### 3.1 CSS ë¯¸ë””ì–´ ì¿¼ë¦¬
```css
/* ëª¨ë°”ì¼ ìš°ì„  */
.room-list-screen {
  display: block;
}

.room-detail-screen {
  display: none;
}

/* ë°ìŠ¤í¬í†± (ì„ íƒì‚¬í•­: ì‚¬ì´ë“œë°”) */
@media (min-width: 768px) {
  .app-container {
    display: flex;
  }

  .room-list-screen {
    width: 300px;
    border-right: 1px solid #ccc;
  }

  .room-detail-screen {
    flex: 1;
  }
}
```

#### 3.2 í„°ì¹˜ ì œìŠ¤ì²˜
- ê¾¹ ëˆ„ë¥´ê¸°: ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´
- ìŠ¤ì™€ì´í”„: ë’¤ë¡œê°€ê¸° (ì„ íƒì‚¬í•­)

---

### Phase 4: UI ì»´í¬ë„ŒíŠ¸ ë¦¬íŒ©í† ë§ (1-2ì¼)

#### 4.1 ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸
```javascript
// components.js

function RoomCard({ room, onClick, onContextMenu }) {
  return `
    <div class="room-card"
         onclick="navigate('room-detail', {roomId: '${room.room_id}'})"
         oncontextmenu="showRoomContextMenu(event, '${room.room_id}')">
      <div class="room-icon">${room.icon || 'ğŸ’¬'}</div>
      <div class="room-info">
        <div class="room-title">${room.title}</div>
        <div class="room-preview">${room.last_message}</div>
        <div class="room-time">${formatTime(room.updated_at)}</div>
      </div>
    </div>
  `;
}

function MessageBubble({ message, isUser }) {
  const alignment = isUser ? 'right' : 'left';
  return `
    <div class="message ${alignment}">
      <div class="message-content">${message.content}</div>
      <div class="message-time">${formatTime(message.timestamp)}</div>
    </div>
  `;
}
```

---

### Phase 5: ê¸°ëŠ¥ í†µí•© (1ì¼)

#### 5.1 ì±„íŒ…ë°© ë‚´ ê¸°ëŠ¥ ì´ë™
- Export â†’ ì±„íŒ…ë°© ë©”ë‰´ë¡œ ì´ë™
- íˆìŠ¤í† ë¦¬ â†’ ì±„íŒ…ë°© ë©”ë‰´ë¡œ ì´ë™
- ì„¤ì • â†’ ì±„íŒ…ë°© ì„¤ì •ìœ¼ë¡œ ì´ë™

#### 5.2 ì „ì—­ ê¸°ëŠ¥ ì •ë¦¬
- ì „ì²´ Export (ëª¨ë“  ì±„íŒ…ë°©)
- Import
- ì•± ì„¤ì • (í…Œë§ˆ, ì–¸ì–´ ë“±)
- ë¡œê·¸ì•„ì›ƒ

---

## ì˜ˆìƒ ì‘ì—…ëŸ‰

| Phase | ì‘ì—… ë‚´ìš© | ì˜ˆìƒ ì‹œê°„ | ìš°ì„ ìˆœìœ„ |
|-------|-----------|-----------|----------|
| Phase 1 | í™”ë©´ ë¶„ë¦¬ ë° ë¼ìš°íŒ… | 2-3ì¼ | ğŸ”´ ë†’ìŒ |
| Phase 2 | ì„¤ì • êµ¬ì¡° ë³€ê²½ | 1-2ì¼ | ğŸ”´ ë†’ìŒ |
| Phase 3 | ë°˜ì‘í˜• ë””ìì¸ | 1ì¼ | ğŸŸ¡ ì¤‘ê°„ |
| Phase 4 | UI ì»´í¬ë„ŒíŠ¸ ë¦¬íŒ©í† ë§ | 1-2ì¼ | ğŸŸ¡ ì¤‘ê°„ |
| Phase 5 | ê¸°ëŠ¥ í†µí•© | 1ì¼ | ğŸŸ¡ ì¤‘ê°„ |
| **í•©ê³„** | | **6-9ì¼** | |

---

## DB ë§ˆì´ê·¸ë ˆì´ì…˜ê³¼ì˜ í†µí•©

### ì‘ì—… ìˆœì„œ ì˜µì…˜

#### ì˜µì…˜ A: ìˆœì°¨ì  (ì¶”ì²œ)
1. **ë¨¼ì €**: DB ë§ˆì´ê·¸ë ˆì´ì…˜ (5-7ì¼)
2. **ê·¸ ë‹¤ìŒ**: UI ì¬ì„¤ê³„ (6-9ì¼)
3. **í•©ê³„**: 11-16ì¼

**ì¥ì **: ê° ë‹¨ê³„ë¥¼ ì™„ì „íˆ í…ŒìŠ¤íŠ¸
**ë‹¨ì **: ì‹œê°„ì´ ë” ì˜¤ë˜ ê±¸ë¦¼

#### ì˜µì…˜ B: ë³‘ë ¬
1. **ë™ì‹œì—**: DB ë§ˆì´ê·¸ë ˆì´ì…˜ + UI ì¬ì„¤ê³„
2. **í•©ê³„**: 7-10ì¼ (ì˜¤ë²„ë©)

**ì¥ì **: ë¹ ë¦„
**ë‹¨ì **: ë³µì¡ë„ ì¦ê°€, í†µí•© ì‘ì—… í•„ìš”

#### ì˜µì…˜ C: í†µí•© (ì¶”ì²œ)
1. **Phase 1**: DB ìŠ¤í‚¤ë§ˆ + ê¸°ë³¸ CRUD (2ì¼)
2. **Phase 2**: UI í™”ë©´ ë¶„ë¦¬ + ë¼ìš°íŒ… (2-3ì¼)
3. **Phase 3**: ì„¤ì • êµ¬ì¡° ë³€ê²½ + DB ì—°ë™ (2ì¼)
4. **Phase 4**: Export/Import + UI ì™„ì„± (2-3ì¼)
5. **Phase 5**: í…ŒìŠ¤íŠ¸ ë° ìµœì í™” (1-2ì¼)
6. **í•©ê³„**: **9-12ì¼**

**ì¥ì **: ì ì§„ì  í†µí•©, ê° ë‹¨ê³„ë§ˆë‹¤ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
**ë‹¨ì **: ì´ˆê¸° ê³„íš í•„ìš”

---

## ìŠ¤íƒ€ì¼ ê°€ì´ë“œ

### ìƒ‰ìƒ íŒ”ë ˆíŠ¸

```css
:root {
  /* ê¸°ë³¸ */
  --primary: #007AFF;      /* íŒŒë€ìƒ‰ - ì•¡ì…˜ */
  --secondary: #5856D6;    /* ë³´ë¼ìƒ‰ - ê°•ì¡° */
  --success: #34C759;      /* ë…¹ìƒ‰ - ì„±ê³µ */
  --danger: #FF3B30;       /* ë¹¨ê°„ìƒ‰ - ìœ„í—˜ */

  /* ë°°ê²½ */
  --bg-primary: #FFFFFF;
  --bg-secondary: #F2F2F7;
  --bg-tertiary: #E5E5EA;

  /* í…ìŠ¤íŠ¸ */
  --text-primary: #000000;
  --text-secondary: #8E8E93;
  --text-tertiary: #C7C7CC;

  /* ë‹¤í¬ ëª¨ë“œ */
  --dark-bg-primary: #000000;
  --dark-bg-secondary: #1C1C1E;
  --dark-bg-tertiary: #2C2C2E;

  --dark-text-primary: #FFFFFF;
  --dark-text-secondary: #8E8E93;
}
```

### íƒ€ì´í¬ê·¸ë˜í”¼

```css
/* ì œëª© */
h1 { font-size: 28px; font-weight: 700; }
h2 { font-size: 22px; font-weight: 600; }
h3 { font-size: 17px; font-weight: 600; }

/* ë³¸ë¬¸ */
body { font-size: 17px; line-height: 1.5; }
.small { font-size: 13px; }
```

### ê°„ê²©

```css
/* 8px ë‹¨ìœ„ */
.spacing-xs { margin: 4px; }
.spacing-sm { margin: 8px; }
.spacing-md { margin: 16px; }
.spacing-lg { margin: 24px; }
.spacing-xl { margin: 32px; }
```

---

## ì ‘ê·¼ì„± (Accessibility)

- [ ] í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ì§€ì›
- [ ] ìŠ¤í¬ë¦° ë¦¬ë” í˜¸í™˜ (ARIA ë¼ë²¨)
- [ ] ì¶©ë¶„í•œ ìƒ‰ìƒ ëŒ€ë¹„ (WCAG AA)
- [ ] í„°ì¹˜ íƒ€ê²Ÿ í¬ê¸° (ìµœì†Œ 44x44px)
- [ ] í¬ì»¤ìŠ¤ í‘œì‹œ

---

## ë‹¤ìŒ ë‹¨ê³„

1. âœ… ì„œë²„ SPA fallback êµ¬í˜„(`/api/*`Â·ì •ì  ì œì™¸ ê²½ë¡œ â†’ `index.html`)
2. âœ… ë¼ìš°í„° ì ìš© ë° í™”ë©´ ë¶„ë¦¬(History API)
3. âœ… DB ì—°ê³„(rooms/messages) ë° Export HTTPí™”
4. âœ… stories ê¸°ëŠ¥ ì œê±° ë° UI ì •ë¦¬
5. â¬œ Export ì˜µì…˜ í™•ì¥(format=zip, ë‚ ì§œ í•„í„°)
6. â¬œ ì ‘ê·¼ì„± ê°œì„ (í¬ì»¤ìŠ¤/ARIA) ë° ëª¨ë°”ì¼ ë³´ì™„

---

## ì°¸ê³  ìë£Œ

- [ChatGPT UI](https://chat.openai.com)
- [Claude UI](https://claude.ai)
- [Material Design - Navigation](https://m3.material.io/components/navigation-drawer)
- [iOS Human Interface Guidelines](https://developer.apple.com/design/human-interface-guidelines/)

---

## ë³€ê²½ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ | ë³€ê²½ ë‚´ìš© |
|------|------|-----------|
| 1.0 | 2025-11-12 | ì´ˆì•ˆ ì‘ì„± |

---

**ì‘ì„±ì**: Claude Code
**ë¦¬ë·° ìš”ì²­**: @ginishuh
