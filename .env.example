#############################################
# Persona Chatbot — 환경변수 예시(.env.example)
#
# 서버/운영 환경별 차이를 고려하여 주석으로 분기 가이드를 제공합니다.
# 이 파일을 복사해 .env 를 만들고, 자신의 환경에 맞게 값만 교체하세요.
#############################################

# 포트 설정 (Docker 호스트 포트)
# - 컨테이너 내부는 고정: HTTP 9000, WS 8765
# - 호스트에서 바인딩할 포트를 지정합니다.
HTTP_PORT=9000
WS_PORT=8765

# 컨테이너 사용자/권한(중요)
# - 일반 사용자 컨테이너(권장): UID/GID를 호스트 사용자로 맞춰 파일 권한 충돌 방지
#   예) Linux: `id -u`, `id -g` 값으로 설정 (기본 1000)
# - 루트 컨테이너(특정 서버에서 필요): 루트 소유 인증디렉터리(/root/...)를 읽어야 할 때
#   이 경우 UID=0, GID=0 으로 설정하세요.
# 기본값은 일반 사용자 기준입니다. 루트가 필요하면 아래 값을 0으로 교체하세요.
UID=1000
GID=1000

# AI CLI 경로 (컨테이너 내부 바이너리 이름)
CLAUDE_PATH=claude
DROID_PATH=droid
GEMINI_PATH=gemini

############################
# 인증/로그인 설정
############################
# 빈 비밀번호면 로그인 없이 사용됩니다.
# 로그인 사용 시 반드시 강력한 비밀번호/시크릿으로 교체하세요.
APP_LOGIN_USERNAME=
APP_LOGIN_PASSWORD=

# JWT 서명 키 (로그인 사용 시 필수)
# 예) openssl rand -hex 32
APP_JWT_SECRET=

# TTL 설정(선택)
APP_JWT_TTL=604800
APP_ACCESS_TTL=3600
APP_REFRESH_TTL=2592000
APP_REFRESH_ROTATE=1

# 만료 유예/로그인 rate limit(선택)
APP_JWT_GRACE_MINUTES=60
APP_LOGIN_MAX_ATTEMPTS=5
APP_LOGIN_LOCK_MINUTES=15

############################
# 프록시/도메인 설정
############################
# Nginx 같은 리버스 프록시 뒤에서 도메인으로 접속할 때 설정합니다.
# 예) wss://chat.example.com/ws
# 비워두면 프론트엔드가 현재 페이지의 프로토콜/호스트를 기준으로 ws(s)://host:포트 를 사용합니다.
APP_PUBLIC_WS_URL=

############################
# 인증 디렉터리 마운트 경로(중요)
############################
# 컨테이너에 CLI 인증 정보를 전달하기 위해 호스트의 디렉터리를 마운트합니다.
# 아래 세 값은 비워두면 docker compose가 에러가 납니다. 꼭 본인 경로로 교체하세요.

# [프로파일 A] 일반 사용자 컨테이너(UID/GID=1000 등) — 권장
#   예) Ubuntu: /home/<user> 기준
# FACTORY_AUTH_DIR=/home/<user>/.factory
# CLAUDE_AUTH_DIR=/home/<user>/.claude
# GEMINI_AUTH_DIR=/home/<user>/.gemini

# [프로파일 B] 루트 컨테이너(UID/GID=0) — 인증 디렉터리가 루트 소유일 때
# FACTORY_AUTH_DIR=/root/.factory
# CLAUDE_AUTH_DIR=/root/.claude
# GEMINI_AUTH_DIR=/root/.gemini

# [프로파일 C] Windows/WSL
# FACTORY_AUTH_DIR=/mnt/c/Users/<User>/.factory
# CLAUDE_AUTH_DIR=/mnt/c/Users/<User>/.claude
# GEMINI_AUTH_DIR=/mnt/c/Users/<User>/.config/gemini

# 기본 예시(필수): 자신의 환경에 맞게 3개 모두 채워주세요.
FACTORY_AUTH_DIR=/home/youruser/.factory
CLAUDE_AUTH_DIR=/home/youruser/.claude
GEMINI_AUTH_DIR=/home/youruser/.gemini

############################
# AI 제공자 기본 모델/키
############################
# Droid 기본 모델(서버에서만 변경 권장)
DROID_MODEL=custom:glm-4.6
# 폴백 모델(선택): 예) glm-4.6,glm-4
# DROID_FALLBACK_MODELS=

# Gemini 기본 모델(선택, 미설정이면 CLI 기본 auto 사용)
GEMINI_MODEL=

############################
# API 키(선택)
############################
# Factory AI (Droid) API 키 — 키 기반 인증을 쓸 때만 필요합니다.
# OAuth 인증 디렉터리를 마운트한다면 비워두어도 됩니다.
# 발급: https://app.factory.ai/settings/api-keys
FACTORY_API_KEY=

############################
# 기타(선택)
############################
# 컨테이너 내부 바인드 호스트 (웹서버/웹소켓)
# docker-compose.yml 기본: 0.0.0.0 (컨테이너 내부)
# 로컬 단독 실행 시 변경하려면 export APP_BIND_HOST=127.0.0.1 등으로 사용
# APP_BIND_HOST=0.0.0.0

# Git 동기화 모드(서버 내부 git push를 비활성화하려면 아래 옵션 참고)
# APP_GIT_SYNC_MODE=host
# APP_DISABLE_GIT_PUSH=1
